;var Main=(function(i,t,a){var n,o=function(){n=this;n.name='Main'};o.staticMethod=function(){};o.prototype={init:function(){n.initTopPage();n.initTooltip()},initTopPage:function(){i(t).scroll(function(){var o=i(this),n=i('#topPage');if(o.scrollTop()>120){n.show()}
else{n.hide()}});i('#topPage').on('click',function(n){i('html, body').animate({scrollTop:0},500)})},initTooltip:function(){i('[data-toggle="tooltip"]').tooltip()}};return o})($,window,document);window.main=new Main();$(document).ready(function(){window.main.init()});
;var Search=(function(e,l,o){var a;if(e('#searchbar').length>0){var c=e('#ac_front_researchtype_trade'),n=e('#ac_front_researchtype_section'),t=e('#ac_front_researchtype_family'),i=e('#ac_front_researchtype_subfamily'),r=e('#ac_front_researchtype_brandtype'),s=e('#ac_front_researchtype_brandnat'),p=e('#ac_front_researchtype_branddistri'),u=e('#ac_front_researchtype_branddisc'),d=e('#ac_front_researchtype_implantation')};var f=function(){a=this;a.name='Search'};f.staticMethod=function(){};f.prototype={init:function(){if(e('#searchbar').length>0){c.selectpicker();a.initSearchTrade();a.initSearchSection();a.initSearchFamily();a.initSearchSubFamily();a.initSearchBrand();a.initCheckOrder();a.initCheckFlux();c.on('change',function(){a.initImplantation()});n.on('change',function(){a.initImplantation()});t.on('change',function(){a.initImplantation()});i.on('change',function(){a.initImplantation()});if(n.val().length===1&&t.val().length===1&&i.val().length===0&&d.find('option').length>0){e('.no-implantation').css('display','none');e('#implantation').removeClass('hidden')}
else{e('#implantation').addClass('hidden');e('.no-implantation').css('display','block')}};if(e('.products').length>0){a.initModal()}},initImplantation:function(){if(n.val().length===1&&t.val().length===1&&i.val().length===0){var r=Routing.generate('search_homepage'),l=e('form'),a={};a['ac_front_researchtype[family][]']=t.val();e.ajax({url:r,type:l.attr('method'),data:a,success:function(a){d.empty();d.selectpicker('destroy');d.replaceWith(e(a).find('#ac_front_researchtype_implantation'))},error:function(e,a,t){console.log(e.responseText)},complete:function(){d=e('#ac_front_researchtype_implantation');if(d.find('option').length>0){e('#implantation').removeClass('hidden');e('.no-implantation').css('display','none');d.selectpicker()}}})}
else{e('#implantation').addClass('hidden');e('.no-implantation').css('display','block')}},initSearchTrade:function(){if(c.val().length>0){n.attr('disabled',!1);e('button[data-id*="section"]').removeClass('disabled');a.ajaxSection()}
else{e('.section-select .selectpicker').selectpicker('deselectAll')};c.prop('selected',!0).change(function(){if(r.val().length>0){if(e.inArray('A',r.val())!=-1){a.findBrand()}};a.ajaxSection()})},initSearchSection:function(){if(n.val().length>0){t.attr('disabled',!1);e('button[data-id*="family"]').removeClass('disabled');a.ajaxFamily()}
else{e('.family-select .selectpicker').selectpicker('deselectAll')};n.prop('selected',!0).change(function(){if(r.val().length>0){if(e.inArray('A',r.val())!=-1){a.findBrand()}};a.ajaxFamily()})},initSearchFamily:function(){if(t.val().length>0){i.attr('disabled',!1);e('button[data-id*="subfamily"]').removeClass('disabled');a.ajaxSubFamily()}
else{e('.subfamily-select .selectpicker').selectpicker('deselectAll')};t.prop('selected',!0).change(function(){if(r.val().length>0){if(e.inArray('A',r.val())!=-1){a.findBrand()}};a.ajaxSubFamily()})},initSearchSubFamily:function(){i.prop('selected',!0).change(function(){if(r.val().length>0){if(e.inArray('A',r.val())!=-1){a.findBrand()}}})},initSearchBrand:function(){var t=r.val();n(t,s,p,u);r.prop('selected',!0).change(function(){t=e(this).val();n(t,s,p,u);if(e.inArray('A',r.val())!=-1){a.findBrand()}});function n(a,t,n,i){t.attr('disabled',!0);e('button[data-id*="brandnat"]').addClass('disabled');n.attr('disabled',!0);e('button[data-id*="branddistri"]').addClass('disabled');i.attr('disabled',!0);e('button[data-id*="branddisc"]').addClass('disabled');e.each(a,function(a,l){if(l==='A'){t.attr('disabled',!1);e('button[data-id*="brandnat"]').removeClass('disabled')};if(l==='M'){n.attr('disabled',!1);e('button[data-id*="branddistri"]').removeClass('disabled')};if(l==='P'){i.attr('disabled',!1);e('button[data-id*="branddisc"]').removeClass('disabled')}})}},initCheckOrder:function(){var t=e('select[name="commandeAvant18"]'),a=e('input[id*="others_24"]');if(t.val()==1){a.prop('checked',!0)};if(a.attr('checked')){t.val(1)};t.change(function(){a.prop('checked',!1);if(t.val()==1){a.prop('checked',!0)}})},initCheckFlux:function(){var t=e('select[name="fluxRestrictif"]'),a=e('input[id*="others_23"]');if(t.val()==1){a.prop('checked',!0)};if(a.attr('checked')){t.val(1)};t.change(function(){a.prop('checked',!1);if(t.val()==1){a.prop('checked',!0)}})},findBrand:function(){var p=Routing.generate('ac_front_get_brand'),a=s,f=c.val(),d=n.val(),o=t.val(),l=i.val(),r={'trade':f,'section':d,'family':o,'subfamily':l};console.log(a);e.ajax({type:'POST',url:p,data:{'ids':r},success:function(t){a.empty();if(t.length){e.each(t,function(t,n){a.append(e('<option></option>').attr('value',n.id).text(n.name))})};a.selectpicker('refresh')},error:function(e,a,t){console.log(e.responseText)}})},ajaxSection:function(){var i=c.val(),t=n.val(),a=Routing.generate('ac_front_get_section');e.ajax({type:'POST',url:a,data:{'idTrade':i},success:function(a){n.empty();if(a.length){n.attr('disabled',!1);e('button[data-id*="section"]').removeClass('disabled');e.each(a,function(a,t){n.append(e('<option></option>').attr('value',t.id).text(t.name))});n.val(t);n.selectpicker('refresh')}
else{n.attr('disabled',!0);e('button[data-id*="section"]').addClass('disabled');e('button[data-id*="family"]').addClass('disabled')}},error:function(e,a,t){console.log(e.responseText)}})},ajaxFamily:function(){var l=n.val(),i=t.val(),a=Routing.generate('ac_front_get_families');e.ajax({type:'POST',url:a,data:{'idsSection':l},success:function(a){t.empty();if(a.length){t.attr('disabled',!1);t.removeClass('disabled');e.each(a,function(a,n){t.append(e('<option></option>').attr('value',n.id).text(n.name))});t.val(i);t.selectpicker('refresh')}
else{t.attr('disabled',!0);e('button[data-id*="family"]').addClass('disabled')}},error:function(e,a,t){alert(e.responseText)}})},ajaxSubFamily:function(){var l=t.val(),n=i.val(),a=Routing.generate('ac_core_get_subfamilies');e.ajax({type:'POST',url:a,data:{'idsFamily':l},success:function(a){i.empty();if(a.length){i.attr('disabled',!1);e('button[data-id*="subfamily"]').removeClass('disabled');e.each(a,function(a,t){i.append(e('<option></option>').attr('value',t.id).text(t.name))});i.val(n);i.selectpicker('refresh')}
else{i.attr('disabled',!0);e('button[data-id*="subfamily"]').addClass('disabled')}},error:function(e,a,t){alert(e.responseText)}})},initModal:function(){var a=e('.anomalyForm'),t=a.find('select');t.change(function(){if(e(this).val()==='other'){e(e(this).data('other')).removeClass('hidden')}
else{e(e(this).data('other')).addClass('hidden')}});a.submit(function(a){a.preventDefault();a.stopPropagation();var l=e(this).find('select[name="type"]').val(),i=e(this).find('textarea[name="other"]').val(),t=e(this).find('input[name="id"]').val(),n=Routing.generate('ac_front_send_anomaly');e.ajax({type:'POST',url:n,data:{'type':l,'other':i,'id':t},success:function(a){console.log(a);e('#product'+t).modal('toggle')},error:function(a,n,i){console.log(i);e('#product'+t).modal('toggle')}})})}};return f})($,window,document);window.search=new Search();$(document).ready(function(){window.search.init()});